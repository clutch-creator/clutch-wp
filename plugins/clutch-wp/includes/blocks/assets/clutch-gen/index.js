(()=>{"use strict";const e=window.wp.i18n,t=window.wp.primitives,n=window.ReactJSXRuntime,l=(0,n.jsx)(t.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,n.jsx)(t.Path,{d:"M6 3H8V5H16V3H18V5C19.1046 5 20 5.89543 20 7V19C20 20.1046 19.1046 21 18 21H6C4.89543 21 4 20.1046 4 19V7C4 5.89543 4.89543 5 6 5V3ZM18 6.5H6C5.72386 6.5 5.5 6.72386 5.5 7V8H18.5V7C18.5 6.72386 18.2761 6.5 18 6.5ZM18.5 9.5H5.5V19C5.5 19.2761 5.72386 19.5 6 19.5H18C18.2761 19.5 18.5 19.2761 18.5 19V9.5ZM11 11H13V13H11V11ZM7 11V13H9V11H7ZM15 13V11H17V13H15Z"})}),o=window.wp.blocks,i=window.wp.blockEditor,a=window.wp.components,s=window.wp.data;function r({open:t,media:l,label:o}){const{baseControlProps:i}=(0,a.useBaseControlProps)({label:o||"your media"});return(0,n.jsx)("div",{style:{marginBottom:"1em",paddingLeft:"5px"},children:(0,n.jsx)(a.BaseControl,{...i,children:(0,n.jsxs)("div",{style:{marginBottom:"1em",border:"1px solid #ccc",padding:"10px"},children:[l?(0,n.jsxs)("div",{children:[(0,n.jsx)("img",{src:l.source_url,alt:l.alt||"",style:{maxWidth:"100%",height:"auto"}}),(0,n.jsx)("p",{children:l.alt||(0,e.__)("No alt text provided")})]}):null,(0,n.jsx)(a.Button,{onClick:t,isPrimary:!0,children:l?(0,e.__)("Change Image"):(0,e.__)("Select Image")})]})})})}function c({label:e,value:t,onChange:l}){const{media:o}=(0,s.useSelect)((e=>({media:e("core").getMedia(t)})),[t]);return(0,n.jsx)(i.MediaUploadCheck,{children:(0,n.jsx)(i.MediaUpload,{onSelect:l,render:({open:t})=>(0,n.jsx)(r,{open:t,media:o,label:e}),value:t,allowedTypes:["image"],gallery:!1,multiple:!1,mediaId:t,media:o,onError:e=>{console.error("Media upload error:",e)}})})}function d({name:t,value:l,defaultValue:o,onChange:i}){const{baseControlProps:s}=(0,a.useBaseControlProps)({label:t});return(0,n.jsx)("div",{style:{marginBottom:"1em",paddingLeft:"5px"},children:(0,n.jsx)(a.BaseControl,{...s,children:(0,n.jsxs)("div",{style:{padding:"5px",border:"1px solid #ccc",marginBottom:"1em"},children:[(l||o||[""]).map(((e,o)=>(0,n.jsxs)("div",{style:{display:"flex",marginBottom:"5px"},children:[(0,n.jsx)("div",{style:{flex:1},children:(0,n.jsx)(a.TextControl,{value:e,onChange:e=>{const n=[...l||[]];n[o]=e,i({[t]:n})}})}),(0,n.jsx)(a.Button,{isDestructive:!0,disabled:!l||l.length<=1,onClick:()=>{const e=[...l||[]];e.splice(o,1),i({[t]:e})},children:"X"})]},o))),(0,n.jsx)(a.Button,{isSecondary:!0,onClick:()=>{const e=[...l||[],""];i({[t]:e})},children:(0,e.__)(`Add ${t} entry`)})]})})})}function m(t){const{name:l,value:o,onChange:i,schema:s}=t,{clutch:r,type:m,media:u,enum:p,default:x}=s;if(u){if("number"!==m)return null;const e=l.endsWith("_media_id")?l.replace("_media_id",""):l;return(0,n.jsx)(c,{label:e,value:o||x||0,onChange:({id:t,url:n})=>{i({[e]:n,[l]:t})}})}return"string"===m?(0,n.jsx)("div",{style:{marginBottom:"1em",paddingLeft:"5px"},children:(0,n.jsx)(a.TextControl,{label:l,value:o||x||"",onChange:e=>{i({[l]:e})}})}):"number"===m?(0,n.jsx)("div",{style:{marginBottom:"1em",paddingLeft:"5px"},children:(0,n.jsx)(a.__experimentalNumberControl,{label:l,value:o||x||0,onChange:e=>{i({[l]:e})}})}):"boolean"===m?(0,n.jsx)("div",{style:{marginBottom:"1em",paddingLeft:"5px"},children:(0,n.jsx)(a.SelectControl,{label:l,value:o||x||!1,onChange:e=>{i({[l]:"true"===e})},options:[{label:(0,e.__)("True"),value:"true"},{label:(0,e.__)("False"),value:"false"}]})}):Array.isArray(p)?(0,n.jsx)("div",{style:{marginBottom:"1em",paddingLeft:"5px"},children:(0,n.jsx)(a.SelectControl,{label:l,value:o||x||"",onChange:e=>{i({[l]:e})},options:p.map((e=>({label:e,value:e})))})}):"array"===m?(0,n.jsx)(d,{...t}):null}const u=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"CLUTCH_BLOCK_NAME","version":"1.0.0","title":"CLUTCH_BLOCK_TITLE","category":"embed","icon":"smiley","description":"Clutch Block","attributes":{},"editorScript":"file:./index.js"}'),{name:p}=u;!function(e){if(!e)return;const{metadata:t,settings:n,name:l}=e;(0,o.registerBlockType)({name:l,...t},n)}({name:p,metadata:u,settings:{icon:l,__experimentalLabel(t,{context:n}){const l=t?.metadata?.name;if("list-view"===n&&l)return l;if("accessibility"===n){if(l)return l;const{content:n}=t;return n&&0!==n.length?n:(0,e.__)("Empty")}},merge:(e,t)=>({content:(e.content||"")+(t.content||"")}),edit:function({name:t,attributes:l,setAttributes:r,isSelected:c}){const d=(0,i.useBlockProps)(),u=(0,s.useSelect)((e=>e(o.store).getBlockType(t)),[t]),[p,x]=Object.entries(u?.attributes||{}).reduce(((e,[t,n])=>("SLOT"===n?.clutch?e[1].push(["clutch/slot",{name:t}]):n?.clutch&&e[0].push({...n,name:t}),e)),[[],[]]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.InspectorControls,{children:(0,n.jsx)(a.Panel,{header:(0,e.__)("Settings"),children:(0,n.jsx)(a.PanelBody,{title:`${u.title} config`,children:""})})}),(0,n.jsxs)("div",{...d,style:{padding:"10px 20px",border:"1px solid #ccc"},children:[(0,n.jsx)("h2",{children:u.title||"Clutch Block"}),p.map((e=>(0,n.jsx)(m,{name:e.name,schema:e,value:l[e.name]||null,onChange:r},e.name))),x.length?(0,n.jsx)(i.InnerBlocks,{allowedBlocks:["clutch/slot"],templateLock:"all",template:x}):null]})]})},save:function({attributes:e}){const t=i.useBlockProps.save();return(0,n.jsx)("div",{...t,children:(0,n.jsx)(i.InnerBlocks.Content,{})})}}})})();